"use strict";(self.webpackChunkui_vms=self.webpackChunkui_vms||[]).push([[492],{5143:function(e,n,t){t.d(n,{r:function(){return f}});var r=t(9439),a=t(9569),s=t(3710),o=t(8096),i=t(4925),u=t(7196),l=t(3466),c=t(3400),d=t(9195),m=t(2791),p=t(184),f=function(e){var n=e.control,t=e.label,f=e.name,h=e.rules,x=(0,m.useState)(!1),v=(0,r.Z)(x,2),g=v[0],Z=v[1],w=function(){return Z((function(e){return!e}))},j=function(e){e.preventDefault()};return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(d.Qr,{name:f,control:n,rules:h,render:function(e){var n=e.field,r=n.onChange,d=n.value,m=e.fieldState.error;return(0,p.jsxs)(o.Z,{fullWidth:!0,variant:"outlined",children:[(0,p.jsx)(i.Z,{htmlFor:"outlined-adornment-password",children:t}),(0,p.jsx)(u.Z,{id:"outlined-adornment-password",type:g?"text":"password",onChange:r,value:d,error:m,inputProps:{autoComplete:"new-password"},endAdornment:(0,p.jsx)(l.Z,{position:"end",children:(0,p.jsx)(c.Z,{"aria-label":"toggle password visibility",onClick:w,onMouseDown:j,edge:"end",children:g?(0,p.jsx)(a.Z,{}):(0,p.jsx)(s.Z,{})})}),label:t})]})}})})}},400:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(9195),a=t(948),s=t(8550),o=t(184);function i(e){var n=e.name,t=e.control,i=e.rules,u=e.label,l=e.format,c=e.onChangeovr,d=e.readOnly,m=e.isNumString,p=e.patternChar;return(0,o.jsx)(r.Qr,{name:n,control:t,rules:i,render:function(e){var n=e.field,t=e.fieldState.error;return(0,o.jsx)(a.HH,{value:n.value,format:l,valueIsNumericString:m,onChange:function(e){void 0!==c&&c(e.target.value),n.onChange(e.target.value)},label:u,error:t,inputRef:n.ref,customInput:s.Z,patternChar:p,inputProps:{readOnly:d},fullWidth:!0})}})}},204:function(e,n,t){t.d(n,{$:function(){return o}});var r=t(8550),a=t(9195),s=t(184),o=function(e){var n=e.control,t=e.label,o=e.name,i=e.rules,u=e.valueovr,l=e.readOnly,c=e.onChangeovr,d=e.toUpperCase,m=e.toLowerCase,p=e.helperText;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(a.Qr,{name:o,control:n,rules:i,defaultValue:u,render:function(e){var n=e.field,a=n.onChange,o=n.value,i=n.ref,u=e.fieldState.error;return(0,s.jsx)(r.Z,{helperText:u?u.message:p,error:!!u,onChange:function(e){a(d?e.target.value.toUpperCase():m?e.target.value.toLowerCase():e)},onBlur:function(e){void 0!==c&&c(e.target.value)},inputRef:i,value:o,label:t,variant:"outlined",inputProps:{readOnly:l},fullWidth:!0})}})})}},6492:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r=t(1413),a=t(4165),s=t(5861),o=t(9439),i=t(2791),u=t(1243),l=t(4554),c=t(5527),d=t(9259),m=t(890),p=t(3239),f=t(533),h=t(6151),x=t(5351),v=t(4070),g=t(6922),Z=t(5143),w=t(2854),j=t(9709),b=t(5193),C=t(204),k=t(9195),y=t(400),S=t(8329),O=t(7689),P=t(184);function I(){var e=(0,O.s0)(),n=(0,b.Z)("(max-width:380px)"),t=(0,k.cI)({defaultValues:{username:""}}),I=t.handleSubmit,T=t.control,D=t.reset,F=(t.getValues,(0,i.useState)()),R=(0,o.Z)(F,2),V=R[0],_=R[1],B=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==ne){e.next=6;break}return e.next=3,N(n);case 3:_(60),e.next=14;break;case 6:if(se||""===ne){e.next=11;break}return e.next=9,U(n);case 9:e.next=14;break;case 11:if(!se||""===ne){e.next=14;break}return e.next=14,W(n);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),N=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,G(!0),X(!0),e.next=5,u.Z.post("".concat("/api","/otp/sendotp"),{username:void 0===n.username?A:n.username});case 5:t=e.sent,S.Z.set("user_id",t.data.user_id),ce({open:!0,status:"success",message:t.data.message}),te(t.data.user_id),G(!1),X(!1),E(n.username),e.next=21;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),X(!1),G(!1),te(""),ce({open:!0,status:"error",message:e.t0.response.data.message});case 21:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.prev=1,e.next=4,u.Z.post("".concat("/api","/otp/validateotp"),{OTP:n.OTP},{withCredentials:!0});case 4:t=e.sent,ce({open:!0,status:"success",message:t.data.message}),D({username:A}),oe(!0),G(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),G(!1),oe(!1),ce({open:!0,status:"error",message:e.t0.response.data.message});case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}(),W=function(){var n=(0,s.Z)((0,a.Z)().mark((function n(t){var r;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,G(!0),n.next=4,u.Z.post("".concat("/api","/user/resetpwd"),{newpwd:t.newpwd},{withCredentials:!0});case 4:r=n.sent,ce({open:!0,status:"success",message:r.data.message}),G(!1),setTimeout((function(){e("/login")}),1e3),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),ce({open:!0,status:"error",message:n.t0.response.data.message}),G(!1);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}(),H=function(){ce((0,r.Z)((0,r.Z)({},le),{},{open:!1}))};(0,i.useEffect)((function(){var e=setInterval((function(){V>0?_(V-1):clearInterval(e)}),1e3);return function(){return clearInterval(e)}}),[V]);var Q=(0,i.useState)(),$=(0,o.Z)(Q,2),z=$[0],G=$[1],L=(0,i.useState)(""),M=(0,o.Z)(L,2),A=M[0],E=M[1],K=(0,i.useState)(!1),q=(0,o.Z)(K,2),J=q[0],X=q[1],Y=(0,i.useState)(""),ee=(0,o.Z)(Y,2),ne=ee[0],te=ee[1],re=(0,i.useState)(!1),ae=(0,o.Z)(re,2),se=ae[0],oe=ae[1],ie=(0,i.useState)({open:!1,status:"success",message:""}),ue=(0,o.Z)(ie,2),le=ue[0],ce=ue[1];return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(l.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",backgroundImage:"url(".concat(g,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:(0,P.jsx)("form",{onSubmit:I(B),children:(0,P.jsxs)(c.Z,{sx:{display:"flex",width:n?"18.75rem":"37.5rem",height:n?"41.5rem":"22.75rem",p:2,flexDirection:"column",alignItems:"center",justifyContent:"center"},elevation:3,children:[(0,P.jsxs)(l.Z,{sx:{display:"flex",gap:1,height:"2rem",mt:"0.1rem"},children:[(0,P.jsx)(d.Z,{component:w.r,sx:{width:"2rem",height:"2rem",mt:"0.1rem"},viewBox:"0 0 5000 5000",color:"white"}),(0,P.jsx)(m.Z,{variant:"h4",children:"Vendor Management System KPN"})]}),(0,P.jsx)(l.Z,{sx:{display:"flex"},children:(0,P.jsx)(m.Z,{variant:"h5",children:"Password Reset"})}),(0,P.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",width:"100%",gap:1,mt:"2rem",flexGrow:2},children:[""===ne&&!se&&(0,P.jsx)(C.$,{control:T,name:"username",label:"Username"}),""!==ne&&!se&&(0,P.jsx)(y.Z,{control:T,name:"OTP",label:"OTP",format:"######"}),""!==ne&&se&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(C.$,{control:T,name:"username",label:"Username",readOnly:!0}),(0,P.jsx)(Z.r,{control:T,name:"newpwd",label:"New Password"})]})]}),(0,P.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"flex-end",flexGrow:1,alignItems:"center",height:n?"3.125rem":"0.1rem",width:n?"18.75rem":"37.5rem"},children:[V>0&&""!==ne&&!se&&"Wait for resend OTP code (".concat(V,") "),""!==ne&&!se&&J&&(0,P.jsx)(p.Z,{sx:{mr:6}}),""!==ne&&!se&&V<=0&&!J&&(0,P.jsx)(f.Z,{onClick:N,children:"Resend OTP Code"}),""!==ne&&(0,P.jsx)(h.Z,{onClick:function(){""!==ne&&te(""),se&&oe(!1)},sx:{height:"3.125rem",m:1,width:"6.25rem"},disabled:V>0&&""!==ne&&!se,children:"Back"}),""===ne&&!se&&(0,P.jsx)(h.Z,{onClick:function(){e("/login")},sx:{height:"3.125rem",m:1,width:"6.25rem"},children:"Back"}),(0,P.jsxs)(j.Z,{type:"submit",sx:{height:"3.125rem",m:1,width:"6.25rem"},loading:z,children:[""===ne&&!se&&"Send OTP",""!==ne&&!se&&"Verify",""!==ne&&se&&"Submit"]})]})]})})}),(0,P.jsx)(x.Z,{open:le.open,onClose:H,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,P.jsx)(v.Z,{severity:le.status,variant:"filled",onClose:H,children:le.message})})]})}},6922:function(e,n,t){e.exports=t.p+"static/media/gama-tower.8eabdb5a85ef85bcd701.jpg"}}]);
//# sourceMappingURL=492.e8f7689e.chunk.js.map