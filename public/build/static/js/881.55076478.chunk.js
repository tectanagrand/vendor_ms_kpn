"use strict";(self.webpackChunkui_vms=self.webpackChunkui_vms||[]).push([[881],{4677:function(e,t,n){n.d(t,{j:function(){return r}});var r=n(1243).Z.create({baseURL:"/api",withCredentials:!0})},903:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(1413),a=n(9195),i=n(5712),l=n(8550),o=n(184);function s(e){var t=e.name,n=e.label,s=e.control,c=e.options,u=e.onChangeovr,d=e.freeSolo,p=e.readOnly,f=e.disable,m=e.rules;return(0,o.jsx)(a.Qr,{name:t,control:s,rules:m,render:function(e){var t=e.field,a=t.onChange,s=t.value,m=t.ref,v=e.fieldState.error;return(0,o.jsx)(i.Z,{onChange:function(e,t){void 0!=u&&u(t),a(d?"object"===typeof t?t:null===t||void 0===t?void 0:t.toUpperCase():t)},value:s,error:v,options:c,freeSolo:d,autoSelect:d,fullWidth:!0,readOnly:p,disabled:f,renderInput:function(e){return(0,o.jsx)(l.Z,(0,r.Z)((0,r.Z)({},e),{},{label:n,error:v,inputRef:m}))}})}})}},400:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(9195),a=n(948),i=n(8550),l=n(184);function o(e){var t=e.name,n=e.control,o=e.rules,s=e.label,c=e.format,u=e.onChangeovr,d=e.readOnly,p=e.isNumString,f=e.patternChar;return(0,l.jsx)(r.Qr,{name:t,control:n,rules:o,render:function(e){var t=e.field,n=e.fieldState.error;return(0,l.jsx)(a.HH,{value:t.value,format:c,valueIsNumericString:p,onChange:function(e){void 0!==u&&u(e.target.value),t.onChange(e.target.value)},label:s,error:n,inputRef:t.ref,customInput:i.Z,patternChar:f,inputProps:{readOnly:d},fullWidth:!0})}})}},8592:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(3786),a=n(8096),i=n(4925),l=n(8406),o=n(7071),s=n(9195),c=n(184);function u(e){var t=e.name,n=e.control,u=e.label,d=e.options,p=e.onChangeovr,f=e.rules,m=e.disabled,v=e.readOnly,h=e.valueovr;return(0,c.jsx)(a.Z,{fullWidth:!0,disabled:m,children:(0,c.jsx)(s.Qr,{render:function(e){var t=e.field,n=t.onChange,a=t.value,s=t.ref,f=e.fieldState.error;return m&&(a=""),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.Z,{error:!!f,children:u}),(0,c.jsx)(l.Z,{fullWidth:!0,error:!!f,label:u,value:a,inputRef:s,inputProps:{readOnly:v,disabled:m},onChange:function(e){n(e),void 0!=p&&p(e.target.value)},children:d.map((function(e){return(0,c.jsx)(r.Z,{value:e.value,children:e.label},e.value)}))}),(0,c.jsx)(o.Z,{error:!!f,children:null===f||void 0===f?void 0:f.message})]})},control:n,name:t,rules:f,defaultValue:h})})}},204:function(e,t,n){n.d(t,{$:function(){return l}});var r=n(8550),a=n(9195),i=n(184),l=function(e){var t=e.control,n=e.label,l=e.name,o=e.rules,s=e.valueovr,c=e.readOnly,u=e.onChangeovr,d=e.toUpperCase,p=e.toLowerCase,f=e.helperText;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(a.Qr,{name:l,control:t,rules:o,defaultValue:s,render:function(e){var t=e.field,a=t.onChange,l=t.value,o=t.ref,s=e.fieldState.error;return(0,i.jsx)(r.Z,{helperText:s?s.message:f,error:!!s,onChange:function(e){a(d?e.target.value.toUpperCase():p?e.target.value.toLowerCase():e)},onBlur:function(e){void 0!==u&&u(e.target.value)},inputRef:o,value:l,label:n,variant:"outlined",inputProps:{readOnly:c},fullWidth:!0})}})})}},1124:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(4165),a=n(5861),i=n(4677),l=n(2791),o=n(1243),s=n(8128),c=n(8329),u=function(){var e=(0,s.k)(),t=e.setAccessToken,n=(e.logOut,function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("".concat("/api","/user/refresh"),{withCredentials:!0});case 3:return n=e.sent,t(n.data.accessToken),e.abrupt("return",n.data.accessToken);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),Object.keys(c.Z.get()).map((function(e){c.Z.remove(e)})),setTimeout((function(){window.location.replace("".concat(window.location.hostname,"/login"))}),100);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}());return n},d=function(){var e=u(),t=(0,s.k)().session;return(0,l.useEffect)((function(){var n=i.j.interceptors.request.use((function(e){return e.headers.Authorization||(e.headers.Authorization="Bearer ".concat(t.accessToken)),e}),(function(e){return Promise.reject(e)})),l=i.j.interceptors.response.use((function(e){return e}),function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var a,l,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=null===n||void 0===n?void 0:n.config,403!==(null===n||void 0===n||null===(a=n.response)||void 0===a?void 0:a.status)||null!==l&&void 0!==l&&l.sent){t.next=8;break}return l.sent=!0,t.next=5,e();case 5:return o=t.sent,l.headers.Authorization="Bearer ".concat(o),t.abrupt("return",(0,i.j)(l));case 8:return t.abrupt("return",Promise.reject(n));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){i.j.interceptors.request.eject(n),i.j.interceptors.response.eject(l)}}),[t,e]),i.j}},881:function(e,t,n){n.r(t),n.d(t,{default:function(){return Te}});var r=n(7762),a=n(3433),i=n(1413),l=n(4165),o=n(5861),s=n(9439),c=n(9164),u=n(4554),d=n(890),p=n(4070),f=n(533),m=n(9673),v=n(5818),h=n(3721),x=n(1889),Z=n(5574),b=n(5661),y=n(7317),k=n(7123),j=n(6151),g=n(5351),_=n(2739),C=n(3239),A=n(1131),R=n(2791),w=n(4942),E=n(5936),I=n(4265),P=n(5486),T=n(1973),N=n(4515),O=n(5003),S=n(8087),D=n(5683),F=n(7893),q=n(8820),V=n(3897),L=n(5397),M=n(7047),B=n(6934),$=n(2065),U=n(915),H=n(5712),z=n(8550),W=n(204),X=n(9195),K=n(903),Y=n(1124),G=n(9961),Q=n(8128),J=n(9709),ee=n(184);function te(e){var t=e.swiftcode,n=e.bankname,r=e.address1,a=e.address2,c=e.address3,p=e.country_code,f=e.limited,m=e.openModal,v=e.handleClose,h=e.setModalopen,x=e.typepost,y=e.params,g=(0,G.l)(),_=(0,Q.k)().session,C=(0,Y.Z)(),A=(0,X.cI)({defaultValues:{swiftcode:"",bankname:"",address1:"",address2:"",address3:"",country:""},shouldUnregister:!1}),w=(0,R.useRef)([{value:"",label:""}]),E=(0,R.useState)(!1),I=(0,s.Z)(E,2),P=I[0],T=I[1];(0,R.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.post("/master/country");case 3:t=e.sent,n=t.data.data,w.current=n.data.map((function(e){return{value:e.country_code,label:"".concat(e.country_code," - ").concat(e.country_name)}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.stack);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e(),A.reset({swiftcode:t,bankname:n,address1:r,address2:a,address3:c,country:p})}),[m]);var N=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var n,r,a,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.prev=1,e.next=4,C.post("/master/addbank",(0,i.Z)((0,i.Z)({},t),{},{type:x,created_by:_.user_id,source:"form"}));case 4:n=e.sent,r={value:n.data.id,label:"".concat(n.data.swiftcode," - ").concat(n.data.name," (new)")},a=y.id,y.row,o=y.field,g.current.setEditCellValue({id:a,field:o,value:r}),h(!1),T(!1),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),alert(e.t0.message),h(!1),T(!1);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsxs)(Z.Z,{maxWidth:"xl",open:m,onClose:v,children:[(0,ee.jsx)(b.Z,{children:"Add new bank"}),(0,R.createElement)(X.RV,(0,i.Z)((0,i.Z)({},A),{},{key:"formmodalcreatebank"}),(0,ee.jsxs)("form",{onSubmit:A.handleSubmit(N),children:[(0,ee.jsxs)(u.Z,{sx:{width:800,height:"100%",padding:3,display:"flex",flexDirection:"column",gap:2},children:[(0,ee.jsx)(u.Z,{sx:{display:"flex",flexDirection:"row",gap:2},children:(0,ee.jsx)(W.$,{name:"swiftcode",label:"Swift Code",control:A.control,rules:{required:"Please insert this field",maxLength:{value:11,message:"Length exceeded 10 characters"}}})}),(0,ee.jsx)(W.$,{name:"bankname",label:"Bank Name",control:A.control,rules:{required:"Please insert this field"}}),!f&&(0,ee.jsx)(W.$,{name:"address1",label:"Address 1",control:A.control,rules:{required:"Please insert this field",maxLength:{value:200,message:"Exceeded 200 characters"}}}),(0,ee.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"row",gap:2},children:[(0,ee.jsx)(K.Z,{name:"country",label:"Country",control:A.control,options:w.current}),!f&&(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(W.$,{name:"address2",label:"Address 2",control:A.control,rules:{required:"Please insert this field",maxLength:{value:50,message:"Exceeded 50 characters"}}}),(0,ee.jsx)(W.$,{name:"address3",label:"Address 3",control:A.control,rules:{required:"Please insert this field",maxLength:{value:50,message:"Exceeded 50 characters"}}})]})]})]}),(0,ee.jsxs)(k.Z,{children:[(0,ee.jsx)(j.Z,{sx:{width:120,m:1},color:"secondary",onClick:v,children:(0,ee.jsx)(d.Z,{children:"Cancel"})}),(0,ee.jsx)(J.Z,{sx:{width:120,m:1},variant:"contained",type:"submit",loading:P,children:(0,ee.jsx)(d.Z,{children:"Submit"})})]})]},2))]})})}function ne(e){var t=(0,G.l)(),n=(0,R.useRef)(),r=function(t){e.newAddModal(t.inputValue)},a=(0,U.D)();return(0,R.useEffect)((function(){e.hasFocus&&n.current.focus()}),[e.hasFocus]),(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsx)(H.Z,{tabIndex:e.tabIndex,name:e.name,options:e.options,value:e.value,onChange:function(n,a){"string"===typeof a?setTimeout((function(){r(a)})):a&&a.inputValue?r(a):function(e,n){var r=e.id,a=(e.row,e.field);t.current.setEditCellValue({id:r,field:a,value:n})}(e,a)},onClose:function(e){e.preventDefault()},filterOptions:function(t,n){var r=a(t,n);return""!==n.inputValue&&e.addnew&&r.push({inputValue:n.inputValue,label:'Add "'.concat(n.inputValue,'"')}),r},getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.label},renderOption:function(e,t){return(0,ee.jsx)("li",(0,i.Z)((0,i.Z)({},e),{},{children:t.label}))},isOptionEqualToValue:function(e,t){return e.id===t.id},fullWidth:!0,renderInput:function(t){return(0,ee.jsx)(z.Z,(0,i.Z)((0,i.Z)({},t),{},{inputRef:n,label:e.label,fullWidth:!0}))}})})}function re(e){var t,n=null===(t=e.row.country)||void 0===t?void 0:t.value,r=(0,Y.Z)(),a=(0,R.useState)([{value:"",label:""}]),c=(0,s.Z)(a,2),u=c[0],d=c[1],p=(0,R.useState)(!1),f=(0,s.Z)(p,2),m=f[0],v=f[1],h=(0,R.useState)(""),x=(0,s.Z)(h,2),Z=x[0],b=x[1];return(0,R.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,a,i,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.get("/master/banksap?country=".concat(n));case 3:t=e.sent,a=t.data,i=a.data,o=null===i||void 0===i?void 0:i.map((function(e){return{value:e.id,label:"".concat(e.bank_code," - ").concat(e.bank_name," ").concat(null!=e.source?"(new)":"")}})),d(o),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),alert(e.t0.stack);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[n]),(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(te,{openModal:m,handleClose:function(){v(!1)},setModalopen:function(e){v(e)},typepost:"insert",bankname:Z,country_code:n,limited:!0,params:e}),(0,ee.jsx)(ne,(0,i.Z)((0,i.Z)({},e),{},{options:u,addnew:!0,country:n,newAddModal:function(e){b(e),v(!0)}}))]})}function ae(e){var t=e.setVen_bank,n=e.setRowModesModel,r=e.idParent;return e.isallow&&(0,ee.jsx)(I.D,{children:(0,ee.jsx)(j.Z,{color:"primary",startIcon:(0,ee.jsx)(S.Z,{}),onClick:function(){var e=(0,O.kb)();t((function(t){return[].concat((0,a.Z)(t),[{id:e,country:{value:"",label:""},bank_id:{value:"",label:""},bank_acc:"",bank_curr:{value:"",label:""},acc_hold:"",isNew:!0,method:"insert",isDb:!1,ven_id:r}])})),n((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,w.Z)({},e,{mode:E.se.Edit,fieldToFocus:"bank_id"}))}))},children:"Add"})})}function ie(e){var t=e.onChildDataChange,n=e.initData,r=e.idParent,a=(e.banks,e.currencies),l=e.countries,o=e.isallow,c=e.ticketState,u=e.isLoad,d=[],p=(0,R.useState)([]),f=(0,s.Z)(p,2),m=f[0],v=f[1],h=null===l||void 0===l?void 0:l.map((function(e){return{value:e.value,label:e.value}}));(0,B.ZP)(P._$,{shouldForwardProp:function(e){return"sx"!==e}})((function(){return{"& .row-idle":{backgroundColor:"#fff"},"& .row-delete":{backgroundColor:"#fc8b72","&:hover":{backgroundColor:(0,$.$n)("#fc8b72",.2)},"&.Mui-selected":{backgroundColor:(0,$._j)("#fc8b72",.2),"&:hover":{backgroundColor:(0,$.$n)("#fc8b72",.2)}}}}}));(0,R.useEffect)((function(){0!=Object.keys(n).length&&(n.map((function(e){d.push({id:e.id,acc_hold:e.acc_hold,bank_acc:e.bank_acc,bank_id:{value:e.bank_id,label:"".concat("FINA"===c?e.bank_key:e.bank_code," - ").concat(e.bank_name," ").concat(null!=e.source?"(new)":"")},bank_curr:{value:e.bank_curr,label:e.bank_curr},country:{value:e.country,label:e.country},isDb:!0,isNew:!1,method:""})})),v(d))}),[n]),(0,R.useEffect)((function(){!function(e){var n=[];e.map((function(e){if(""!==e.method){var t,r,a,l=(0,i.Z)((0,i.Z)({},e),{},{bank_id:null===(t=e.bank_id)||void 0===t?void 0:t.value,bankv_id:e.id,bank_curr:null===(r=e.bank_curr)||void 0===r?void 0:r.value,country:null===(a=e.country)||void 0===a?void 0:a.value});delete l.isDb,delete l.isNew,delete l.id,n.push(l)}})),t(n)}(m)}),[m]);var x=(0,R.useState)({}),Z=(0,s.Z)(x,2),b=Z[0],y=Z[1],k=function(e){return function(){y((0,i.Z)((0,i.Z)({},b),{},(0,w.Z)({},e.id,{mode:E.se.Edit})))}},j=function(e){return function(){y((0,i.Z)((0,i.Z)({},b),{},(0,w.Z)({},e.id,{mode:E.se.View})))}},g=function(e){return function(){var t=[];m.map((function(n){n.id===e?1==n.isDb&&t.push((0,i.Z)((0,i.Z)({},n),{},{method:"delete"})):t.push(n)})),v(t)}},_=function(e){return function(){y((0,i.Z)((0,i.Z)({},b),{},(0,w.Z)({},e,{mode:E.se.View,ignoreModifications:!0}))),m.find((function(t){return t.id===e})).isNew&&v(m.filter((function(t){return t.id!=e})))}},C=function(e){return function(){var t=[];m.map((function(n){n.id===e?t.push((0,i.Z)((0,i.Z)({},n),{},{method:""})):t.push(n)})),v(t)}},A=[{field:"country",headerName:"Country",editable:o,valueFormatter:function(e){var t=e.value;return null===t||void 0===t?void 0:t.label},renderEditCell:function(e){return(0,ee.jsx)(ne,(0,i.Z)((0,i.Z)({},e),{},{options:h}))},width:100},{field:"bank_id",headerName:"Bank Name",editable:o,valueFormatter:function(e){var t=e.value;return null===t||void 0===t?void 0:t.label},renderEditCell:function(e){return(0,ee.jsx)(re,(0,i.Z)({},e))},width:350},{field:"bank_curr",headerName:"Currency",editable:o,valueFormatter:function(e){var t=e.value;return null===t||void 0===t?void 0:t.label},renderEditCell:function(e){return(0,ee.jsx)(ne,(0,i.Z)((0,i.Z)({},e),{},{options:a}))},width:100},{field:"bank_acc",type:"string",headerName:"Bank Account",width:200,editable:o,valueGetter:function(e){var t;return null===(t=e.value)||void 0===t?void 0:t.toUpperCase()}},{field:"acc_hold",type:"string",headerName:"Account Holder",width:250,editable:o,valueGetter:function(e){var t;return null===(t=e.value)||void 0===t?void 0:t.toUpperCase()}},{field:"action",type:"actions",headerName:"Action",width:100,cellClassName:"actions",getActions:function(e){var t,n=e.id,r=(null===(t=b[n])||void 0===t?void 0:t.mode)===E.se.Edit;return o?r?[(0,ee.jsx)(N.u,{icon:(0,ee.jsx)(D.Z,{}),label:"Save",onClick:j(e)}),(0,ee.jsx)(N.u,{icon:(0,ee.jsx)(F.Z,{}),label:"Cancel",onClick:_(n)})]:"delete"==e.row.method?[(0,ee.jsx)(N.u,{icon:(0,ee.jsx)(q.Z,{}),label:"Edit",onClick:k(e)}),(0,ee.jsx)(N.u,{icon:(0,ee.jsx)(V.Z,{}),label:"Undo",onClick:C(n)})]:[(0,ee.jsx)(N.u,{icon:(0,ee.jsx)(q.Z,{}),label:"Edit",onClick:k(e)}),(0,ee.jsx)(N.u,{icon:(0,ee.jsx)(L.Z,{}),label:"Delete",onClick:g(n)})]:[]}}];return(0,ee.jsx)(ee.Fragment,{children:u?(0,ee.jsx)(M.Z,{variant:"rectangular",width:1e3,height:200}):(0,ee.jsx)(P._$,{rows:m,columns:A,editMode:"row",rowModesModel:b,onRowModesModelChange:function(e){y(e)},onRowEditStop:function(e,t){e.reason!==T.U.rowFocusOut&&e.reason!==T.U.enterKeyDown||(t.defaultMuiPrevented=!0)},processRowUpdate:function(e){var t=(0,i.Z)((0,i.Z)({},e),{},{isNew:!1}),n=[];return m.map((function(r){r.id===e.id?!0===r.isDb?n.push((0,i.Z)((0,i.Z)({},t),{},{method:"update"})):n.push(t):n.push(r)})),v(n),t},slots:{toolbar:ae},slotProps:{toolbar:{setVen_bank:v,setRowModesModel:y,idParent:r,isallow:o}},getRowClassName:function(e){return"delete"==e.row.method?"row-delete":"row-idle"},autoHeight:!0,getEstimatedRowHeight:function(){return 100},getRowHeight:function(){return"auto"},sx:{fontSize:"11pt"}})})}var le=n(6314),oe=n(8096),se=n(4925),ce=n(8406),ue=n(3786),de=n(4583),pe=n(2456),fe=n(9353),me=n.n(fe),ve=n(4677),he=(0,R.forwardRef)((function(e,t){return(0,ee.jsx)(p.Z,(0,i.Z)({elevation:6,ref:t,variant:"filled"},e))}));function xe(e){var t=e.initData,n=e.upTable,r=e.isallow,a=e.isLoad,c=(0,R.useState)(t),u=(0,s.Z)(c,2),d=u[0],p=u[1],f=(0,R.useState)(!1),m=(0,s.Z)(f,2),v=m[0],h=m[1],x=(0,R.useState)(!1),Z=(0,s.Z)(x,2),b=Z[0],y=(Z[1],(0,R.useState)({})),k=(0,s.Z)(y,2),j=k[0],A=k[1];(0,R.useEffect)((function(){p(t)}),[t]);var w=(0,B.ZP)(P._$)((function(){return{"& .row-idle":{backgroundColor:"#fff"},"& .row-delete":{backgroundColor:"#fc8b72","&:hover":{backgroundColor:(0,$.$n)("#fc8b72",.2)},"&.Mui-selected":{backgroundColor:(0,$._j)("#fc8b72",.2),"&:hover":{backgroundColor:(0,$.$n)("#fc8b72",.2)}}}}})),E=function(){h(!0)},I=function(e){var t=e.id;e.row;return function(){var e=[];d.map((function(n){n.id===t?e.push((0,i.Z)((0,i.Z)({},n),{},{method:""})):e.push(n)})),p(e),n(e)}},T=[{field:"desc_file",type:"string",headerName:"Type",width:200},{field:"file_name",type:"string",headerName:"File Name",width:650},{field:"action",type:"actions",headerName:"Action",width:100,cellClassName:"actions",renderCell:function(e){var t=function(e){var t=e.row.file_name;ve.j.get("/master/file/".concat(t),{responseType:"blob"}).then((function(e){me()(e.data,t),A({stat:"success",message:"file downloaded"}),E()})).catch((function(e){console.log(e),A({stat:"error",message:"error download file"}),E()}))};return"delete"==e.row.method?[(0,ee.jsx)(N.u,{icon:(0,ee.jsx)(V.Z,{}),label:"Undo",onClick:I(e)},"undo-".concat(e.id))]:r?[(0,ee.jsx)(N.u,{icon:(0,ee.jsx)(L.Z,{}),label:"Delete",onClick:function(){return function(e){var t=[];d.map(function(){var n=(0,o.Z)((0,l.Z)().mark((function n(r){var a,o;return(0,l.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r.id!==e){n.next=20;break}if("ven_file_atth"!=r.source){n.next=6;break}t.push((0,i.Z)((0,i.Z)({},r),{},{method:"delete"})),n.next=18;break;case 6:return n.next=8,fetch("".concat("/api","/vendor/file"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});case 8:return a=n.sent,n.next=11,a.json();case 11:if(200!=(o=n.sent).status){n.next=17;break}A({stat:"success",message:"temporary file ".concat(o.data.file_name," deleted")}),E(),n.next=18;break;case 17:throw Error(o.message);case 18:n.next=21;break;case 20:t.push(r);case 21:n.next=27;break;case 23:n.prev=23,n.t0=n.catch(0),A({stat:"error",message:"error deleting item"}),E();case 27:case"end":return n.stop()}}),n,null,[[0,23]])})));return function(e){return n.apply(this,arguments)}}()),p(t),n(t)}(e.id)}},"delete-".concat(e.id)),(0,ee.jsx)(N.u,{icon:(0,ee.jsx)(pe.Z,{}),label:"Download",onClick:function(){return t(e)}},"dwn-".concat(e.id))]:[(0,ee.jsx)(N.u,{icon:(0,ee.jsx)(pe.Z,{}),label:"Download",onClick:function(){return t(e)}},"dwn-".concat(e.id))]}}];return(0,ee.jsxs)(ee.Fragment,{children:[a?(0,ee.jsx)(M.Z,{variant:"rectangular",width:1e3,height:200}):(0,ee.jsx)(w,{autoHeight:!0,rows:d,columns:T,getRowClassName:function(e){return"delete"==e.row.method?"row-delete":"row-idle"}}),(0,ee.jsx)(g.Z,{open:v,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&h(!1)},anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,ee.jsx)(he,{severity:j.stat?j.stat:"info",children:j.message?j.message:"test"})}),(0,ee.jsx)(_.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:b,children:(0,ee.jsx)(C.Z,{color:"inherit"})})]})}var Ze=(0,R.forwardRef)((function(e,t){return(0,ee.jsx)(p.Z,(0,i.Z)({elevation:6,ref:t,variant:"filled"},e))}));function be(e){var t=e.inputTypes,n=e.onChildDataChange,r=e.iniData,c=e.idParent,p=e.allow,f=e.loadData,m=(0,Q.k)().session,v=(0,R.useState)(0),h=(0,s.Z)(v,2),x=h[0],Z=h[1],b=(0,R.useState)({stat:!1,type:"",message:""}),y=(0,s.Z)(b,2),k=y[0],j=y[1],_=(0,R.useState)([]),C=(0,s.Z)(_,2),A=C[0],w=C[1],E=[{key:"pleaseSelect",value:"Please Select Item"}].concat((0,a.Z)(t)),I=(0,R.useState)(!1),P=(0,s.Z)(I,2),T=P[0],N=P[1],O=function(e){var t=[];e.map((function(e){if(""!==e.method){var n=(0,i.Z)({},e);delete n.id,t.push(n)}})),n(t)};(0,R.useEffect)((function(){if(0!=Object.keys(r).length){var e=[];r.map((function(t){e.push((0,i.Z)((0,i.Z)({},t),{},{method:"",id:t.file_id}))})),w([].concat((0,a.Z)(A),e)),O(A)}}),[r]);var S=function(e,t){"clickaway"!==t&&j((0,i.Z)((0,i.Z)({},k),{},{stat:!1}))},D=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var n,r,o,s,u;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,n=(0,a.Z)(t.target.files),r=new FormData,n.forEach((function(e,t){r.append("file_atth",e,e.name)})),r.append("method","insert"),r.append("file_type",E[x].key),r.append("created_by",m.user_id),r.append("desc_file",E[x].value),r.append("ven_id",c),e.next=12,fetch("".concat("/api","/vendor/uploadTemp"),{method:"POST",body:r});case 12:return o=e.sent,e.next=15,o.json();case 15:200==(s=e.sent).status?(u=s.data.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{id:e.file_id})})),w([].concat((0,a.Z)(A),(0,a.Z)(u))),O([].concat((0,a.Z)(A),(0,a.Z)(u))),j({stat:!0,type:"success",message:"File Upload Success"}),N(!1)):(j({stat:!0,type:"error",message:s.message}),N(!1)),document.getElementById("fileUpload").value=null,e.next=25;break;case 20:e.prev=20,e.t0=e.catch(1),N(!1),j({stat:!0,type:"error",message:e.t0.message}),console.error(e.t0);case 25:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}();return(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsxs)(le.Z,{spacing:2,children:[(0,ee.jsx)(d.Z,{sx:{ml:2,mb:2},children:"Upload File Here"}),(0,ee.jsxs)(u.Z,{sx:{width:500,height:50,display:"flex",alignItems:"center"},children:[(0,ee.jsxs)(oe.Z,{fullWidth:!0,children:[(0,ee.jsx)(se.Z,{htmlFor:"fileType",id:"fileType-label",children:(0,ee.jsx)(d.Z,{children:"Type File"})}),(0,ee.jsx)(ce.Z,{label:"Type File *",id:"fileType",labelId:"fileType-label",onChange:function(e){Z(e.target.value)},value:x,children:E.map((function(e,t){return(0,ee.jsx)(ue.Z,{value:t,children:e.value},e.key)}))})]}),(0,ee.jsxs)(J.Z,{component:"label",startIcon:(0,ee.jsx)(de.Z,{}),variant:"outlined",sx:{height:50,width:300,margin:2},onClick:function(e){if(0==x)return j({stat:!0,type:"error",message:"Type File not Chosen"}),void e.preventDefault()},disabled:!p,loading:T,children:["Upload",(0,ee.jsx)("input",{type:"file",id:"fileUpload",name:"fileUpload",multiple:!0,hidden:!0,onChange:D})]})]}),(0,ee.jsx)(g.Z,{open:k.stat,onClose:S,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,ee.jsx)(Ze,{severity:k.type,onClose:S,children:k.message})}),(0,ee.jsx)(xe,{initData:A,upTable:function(e){w(e),O(e)},isallow:p,isLoad:f})]})})}var ye=n(7689),ke=n(1243),je=n(8592),ge=n(5523),_e=n(4454);function Ce(e){var t=e.name,n=e.control,r=e.label,a=e.readOnly,l=e.onChangeovr;return(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsx)(ge.Z,{control:(0,ee.jsx)(X.Qr,{name:t,control:n,render:function(e){var t=e.field;return(0,ee.jsx)(_e.Z,(0,i.Z)((0,i.Z)({},t),{},{checked:t.value,disabled:a,onChange:function(e){void 0!==l&&l(e.target.checked),t.onChange(e.target.checked)}}))}}),label:r})})}var Ae=n(948);function Re(e){var t=e.name,n=e.label,r=e.control,a=e.currency,i=(e.format,e.rules),l=e.readOnly,o=e.disabled;return(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsx)(X.Qr,{control:r,name:t,rules:i,render:function(e){var t=e.field,r=t.onChange,i=t.value,s=t.ref,c=e.fieldState.error;return(0,ee.jsx)(Ae.h3,{onChange:r,value:i,label:n,thousandSeparator:!0,inputRef:s,customInput:z.Z,prefix:"".concat(a," "),error:c,fullWidth:!0,inputProps:{readOnly:l,disabled:o}})}})})}var we=n(400);function Ee(e){var t=e.open,n=e.handleConfirm,r=e.onCloseConf,a=e.sx,i=e.confirmText,l=function(){r()};return(0,ee.jsxs)(Z.Z,{open:t,onClose:l,maxWidth:"lg",sx:a,children:[(0,ee.jsx)(u.Z,{sx:{width:"40rem",height:"12rem",display:"flex",flexDirection:"column",gap:5,p:2,mb:3,justifyContent:"center"},children:(0,ee.jsx)(d.Z,{textAlign:"center",variant:"h4",children:i})}),(0,ee.jsxs)(k.Z,{children:[(0,ee.jsx)(j.Z,{onClick:function(){l()},variant:"contained",children:"Cancel"}),(0,ee.jsx)(j.Z,{color:"error",variant:"contained",onClick:function(){n()},children:"Submit"})]})]})}var Ie={"3RD_PARTY":[{value:"MATERIAL",label:"Material"},{value:"CONTRACTOR",label:"Contractor"},{value:"INSURANCE",label:"Insurance"},{value:"ONE_TIME",label:"One Time"},{value:"OTHER",label:"Other"},{value:"TRANSPORTER",label:"Transporter"}],INTERCO:[{value:"MATERIAL",label:"Material"},{value:"CONTRACTOR",label:"Contractor"},{value:"INSURANCE",label:"Insurance"},{value:"OTHER",label:"Other"},{value:"TRANSPORTER",label:"Transporter"}],RELATED:[{value:"MATERIAL",label:"Material"},{value:"CONTRACTOR",label:"Contractor"},{value:"INSURANCE",label:"Insurance"},{value:"OTHER",label:"Other"},{value:"TRANSPORTER",label:"Transporter"}],BANK:[{value:"X",label:"X"}],SHAREHOLDERS:[{value:"X",label:"X"}],EMPLOYEE:[{value:"X",label:"X"}],INTERDIVISION:[{value:"X",label:"X"}]},Pe=[{key:"A001",value:"Account Statement Letter"},{key:"A002",value:"Passbook"},{key:"A003",value:"ID Card (KTP)"},{key:"A004",value:"Integrity Pact"},{key:"A005",value:"NPWP (Tax ID Number)"},{key:"A006",value:"SPPKP"}];function Te(){var e,t,n,w,E,I,P,T,N=(0,ye.f_)(),O=(0,Y.Z)(),S=(0,X.cI)({defaultValues:{emailRequestor:"",deptRequestor:"",titlecomp:"",localovs:"",name1:"",country:"",street:"",street2:"",postal:"",city:"",telf:"",fax:"",email:"",ispkp:!1,npwp:"",paymthd:"",payterm:"",company:"",purchorg:"",vengroup:"",venacc:"",ventype:"",currency:"",description:"",is_tender:!1,vendorcode:"",remarks_readOnly:"",limit:"",search_term:""}}),D=S.handleSubmit,F=S.control,q=S.getValues,V=S.reset,L=S.setFocus,M=S.formState,B=M.errors,$=M.isSubmitting,U=M.isValid,H=S.clearErrors,z=(0,X.cI)({defaultValues:{remarks:""}}),G=z.handleSubmit,te=z.control,ne=(0,R.useState)({ticket_id:"",ticket_num:"",ven_id:"",ticketState:"",data:"",permission:"",cur_pos:""}),re=(0,s.Z)(ne,2),ae=re[0],le=re[1];(0,R.useEffect)((function(){var e=N.type,t=N.token;function n(){return(n=(0,o.Z)((0,l.Z)().mark((function e(t){var n,r,a,i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,e.next=3,O.get("/ticket/form/".concat(t),{signal:n.signal});case 3:return r=e.sent,a=r.data.data,""===(i={emailRequestor:a.email_proc?a.email_proc:"",deptRequestor:a.dep_proc?a.dep_proc:"",titlecomp:a.title?a.title:"",localovs:a.local_ovs?a.local_ovs:"",name1:a.name_1?a.name_1:"",country:a.country?a.country:"",street:a.street?a.street:"",street2:a.street2?a.street2:"",postal:a.postal?a.postal:"",city:a.city?a.city:"",telf:a.telf1?a.telf1:"",fax:a.fax?a.fax:"",email:a.email?a.email:"",ispkp:!!a.is_pkp&&a.is_pkp,npwp:a.npwp?a.npwp:"",paymthd:a.pay_mthd?a.pay_mthd:"",payterm:a.pay_term?a.pay_term:"I30",company:a.company?a.company:"",purchorg:a.purch_org?a.purch_org:"",vengroup:a.ven_group?a.ven_group:"",venacc:a.ven_acc?a.ven_acc:"",ventype:a.ven_type?a.ven_type:"",currency:a.lim_curr?a.lim_curr:"",description:a.description?a.description:"",is_tender:!!a.is_tender&&a.is_tender,vendorcode:a.ven_code?a.ven_code:a.header,remarks_readOnly:a.remarks?a.remarks:"",remarks:"",limit:a.limit_vendor?a.limit_vendor:"",reject_by:a.reject_by?a.reject_by:"",search_term:a.search_term?a.search_term:"",is_active:a.ticket_stat}).name1?(Qe(!0),ar({panelReqDet:!0,panelCompDet:!0,panelAddr:!1,panelTax:!1,panelBank:!1,panelFile:!1,panelVendetail:!1,panelApproval:!1})):(Qe(!1),ar({panelReqDet:!0,panelCompDet:!0,panelAddr:!0,panelTax:!0,panelBank:!0,panelFile:!0,panelVendetail:!0,panelApproval:!0})),le({ticket_id:a.ticket_id,ticket_num:a.ticket_num,ven_id:null===a.ven_id?a.ticket_ven_id:a.ven_id,ticketState:a.ticket_state,ticket_type:a.t_type,data:i,cur_pos:a.cur_pos}),e.abrupt("return",{ticket_id:a.ticket_id,ticket_num:a.ticket_num,ven_id:null===a.ven_id?a.ticket_ven_id:a.ven_id,ticketState:a.ticket_state,data:i});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=(0,o.Z)((0,l.Z)().mark((function e(t){var n,r,a,i;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/ticket/newform/".concat(t));case 2:return n=e.sent,ar({panelReqDet:!0,panelCompDet:!0,panelAddr:!1,panelTax:!1,panelBank:!1,panelFile:!1,panelVendetail:!1,panelApproval:!1}),r=n.data.data,a={emailRequestor:r.email_proc?r.email_proc:"",deptRequestor:r.dep_proc?r.dep_proc:"",titlecomp:r.title?r.title:"",localovs:r.local_ovs?r.local_ovs:"",name1:r.name_1?r.name_1:"",country:r.country?r.country:"",street:r.street?r.street:"",street2:r.street2?r.street2:"",postal:r.postal?r.postal:"",city:r.city?r.city:"",telf:r.telf1?r.telf1:"",fax:r.fax?r.fax:"",email:r.email?r.email:"",ispkp:!!r.is_pkp&&r.is_pkp,npwp:r.npwp?r.npwp:"",paymthd:r.pay_mthd?r.pay_mthd:"",payterm:r.pay_term?r.pay_term:"I30",company:r.company?r.company:"",purchorg:r.purch_org?r.purch_org:"",vengroup:r.ven_group?r.ven_group:"",venacc:r.ven_acc?r.ven_acc:"",ventype:r.ven_type?r.ven_type:"",currency:r.lim_curr?r.lim_curr:"",description:r.description?r.description:"",is_tender:!!r.is_tender&&r.is_tender,vendorcode:r.ven_code?r.ven_code:r.header,remarks_readOnly:r.remarks?r.remarks:"",remarks:"",limit:r.limit_vendor?r.limit_vendor:"",reject_by:r.reject_by?r.reject_by:"",is_active:r.ticket_stat,search_term:r.search_term?r.search_term:""},i={INIT:{create:!1,read:!1,update:!0,delete:!1},CREA:{create:!1,read:!1,update:!1,delete:!1},FINA:{create:!1,read:!1,update:!1,delete:!1}},""===a.name1?(Qe(!0),ar({panelReqDet:!0,panelCompDet:!0,panelAddr:!1,panelTax:!1,panelBank:!1,panelFile:!1,panelVendetail:!1,panelApproval:!1})):(Qe(!1),ar({panelReqDet:!0,panelCompDet:!0,panelAddr:!0,panelTax:!0,panelBank:!0,panelFile:!0,panelVendetail:!0,panelApproval:!0})),le({ticket_id:r.ticket_id,ticket_num:r.ticket_num,ven_id:null===r.ven_id?r.ticket_ven_id:r.ven_id,ticketState:r.ticket_state,ticket_type:r.t_type,data:a,permission:i,cur_pos:r.cur_pos}),e.abrupt("return",{ticket_id:r.ticket_id,ticket_num:r.ticket_num,ven_id:null===r.ven_id?r.ticket_ven_id:r.ven_id,ticketState:r.ticket_state,data:a,permission:i});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}"form"===e?function(e){n.apply(this,arguments)}(t):function(e){r.apply(this,arguments)}(t)}),[]);(0,ye.UO)();var oe=(0,R.useState)(null===(e=ae.data)||void 0===e?void 0:e.country),se=(0,s.Z)(oe,2),ce=se[0],ue=se[1],de=(0,R.useState)(null===(t=ae.data)||void 0===t?void 0:t.vengroup),pe=(0,s.Z)(de,2),fe=pe[0],me=pe[1],ve=(0,R.useState)(null===(n=ae.data)||void 0===n?void 0:n.venacc),he=(0,s.Z)(ve,2),xe=he[0],Ze=he[1],ge=(0,R.useState)(null===(w=ae.data)||void 0===w?void 0:w.currency),_e=(0,s.Z)(ge,2),Ae=_e[0],Te=_e[1],Ne=(0,R.useState)(!1),Oe=(0,s.Z)(Ne,2),Se=Oe[0],De=Oe[1],Fe=(0,R.useState)(""),qe=(0,s.Z)(Fe,2),Ve=qe[0],Le=qe[1],Me=(0,R.useState)(null===(E=ae.data)||void 0===E?void 0:E.titlecomp),Be=(0,s.Z)(Me,2),$e=Be[0],Ue=Be[1],He=(0,R.useState)(),ze=(0,s.Z)(He,2),We=ze[0],Xe=ze[1],Ke=(0,R.useState)(!0),Ye=(0,s.Z)(Ke,2),Ge=Ye[0],Qe=Ye[1],Je=(0,R.useState)(null===(I=ae.data)||void 0===I?void 0:I.is_tender),et=(0,s.Z)(Je,2),tt=et[0],nt=et[1],rt=(0,R.useState)(!1),at=(0,s.Z)(rt,2),it=at[0],lt=at[1],ot=(0,R.useState)(!1),st=(0,s.Z)(ot,2),ct=st[0],ut=st[1],dt=(0,R.useState)(!1),pt=(0,s.Z)(dt,2),ft=pt[0],mt=pt[1],vt=(0,R.useState)(!1),ht=(0,s.Z)(vt,2),xt=ht[0],Zt=ht[1],bt=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return un(!0),e.prev=1,e.next=4,O.get("/vendor/checkven?name=".concat(t));case 4:e.sent,Qe(!1),ar({panelReqDet:!0,panelCompDet:!0,panelAddr:!0,panelTax:!0,panelBank:!0,panelFile:!0,panelVendetail:!0,panelApproval:!0}),un(!1),lt(!1),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),ar({panelReqDet:!0,panelCompDet:!0,panelAddr:!1,panelTax:!1,panelBank:!1,panelFile:!1,panelVendetail:!1,panelApproval:!1}),un(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();(0,R.useEffect)((function(){var e,t,n,r,a,i,l,o,s;V(ae.data),ue(null===(e=ae.data)||void 0===e?void 0:e.country),me(null===(t=ae.data)||void 0===t?void 0:t.vengroup),Ze(null===(n=ae.data)||void 0===n?void 0:n.venacc),Te(null===(r=ae.data)||void 0===r?void 0:r.currency),nt(null===(a=ae.data)||void 0===a?void 0:a.is_tender),Ue(null===(i=ae.data)||void 0===i?void 0:i.titlecomp),Xe(null===(l=ae.data)||void 0===l?void 0:l.name1),Le(null===(o=ae.data)||void 0===o?void 0:o.localovs),De(null===(s=ae.data)||void 0===s?void 0:s.ispkp)}),[ae]),(0,R.useEffect)((function(){var e=Object.keys(B).reduce((function(e,t){return B[e]?e:t}),null);e&&L(e)}),[B,L]),(0,R.useEffect)((function(){xt&&(cr(q()),mt(!1),Zt(!1))}),[xt]);var yt=(0,ye.s0)(),kt=(0,Q.k)(),jt=kt.session,gt=kt.getPermission,_t=null===ae||void 0===ae?void 0:ae.ticketState,Ct=null===(P=ae.data)||void 0===P?void 0:P.is_active,At=(0,R.useRef)(null===(T=ae.data)||void 0===T?void 0:T.country),Rt={};Ct?void 0!=ae.permission?Rt=ae.permission:(Rt.INIT=gt("Initial Form"),Rt.CREA=gt("Creation Form"),Rt.FINA=gt("Final Form")):Rt={INIT:{create:!1,read:!1,update:!1,delete:!1},CREA:{create:!1,read:!1,update:!1,delete:!1},FINA:{create:!1,read:!1,update:!1,delete:!1}};var wt={INIT:Rt.INIT.update,CREA:Rt.CREA.update,FINA:Rt.FINA.update},Et=(0,R.useRef)([{value:"",label:""}]),It=(0,R.useRef)([{value:"",label:""}]),Pt=(0,R.useRef)([{value:"",label:""}]),Tt=(0,R.useRef)([{value:"",label:""}]),Nt=(0,R.useRef)([{value:"",label:""}]),Ot=(0,R.useRef)(!1),St=(0,R.useRef)(!1),Dt=(0,R.useState)([]),Ft=(0,s.Z)(Dt,2),qt=Ft[0],Vt=Ft[1],Lt=(0,R.useState)([]),Mt=(0,s.Z)(Lt,2),Bt=Mt[0],$t=Mt[1],Ut=(0,R.useState)(!1),Ht=(0,s.Z)(Ut,2),zt=Ht[0],Wt=Ht[1],Xt=(0,R.useState)(!1),Kt=(0,s.Z)(Xt,2),Yt=Kt[0],Gt=Kt[1],Qt=(0,R.useState)([{value:"",label:""}]),Jt=(0,s.Z)(Qt,2),en=Jt[0],tn=Jt[1],nn=(0,R.useState)(!1),rn=(0,s.Z)(nn,2),an=rn[0],ln=rn[1],on=(0,R.useState)(!1),sn=(0,s.Z)(on,2),cn=sn[0],un=sn[1],dn=(0,R.useRef)(!1),pn=(0,R.useState)(!1),fn=(0,s.Z)(pn,2),mn=fn[0],vn=(fn[1],(0,R.useState)(!1)),hn=(0,s.Z)(vn,2),xn=hn[0],Zn=hn[1],bn=(0,R.useState)(!1),yn=(0,s.Z)(bn,2),kn=yn[0],jn=yn[1],gn=(0,R.useState)(!1),_n=(0,s.Z)(gn,2),Cn=_n[0],An=_n[1],Rn=(0,R.useState)(!1),wn=(0,s.Z)(Rn,2),En=wn[0],In=wn[1],Pn=(0,R.useState)(!1),Tn=(0,s.Z)(Pn,2),Nn=Tn[0],On=Tn[1],Sn=(0,R.useState)(!1),Dn=(0,s.Z)(Sn,2),Fn=Dn[0],qn=Dn[1],Vn=(0,R.useState)(!1),Ln=(0,s.Z)(Vn,2),Mn=Ln[0],Bn=Ln[1],$n=(0,R.useState)({stat:!1,type:"info",message:""}),Un=(0,s.Z)($n,2),Hn=Un[0],zn=Un[1],Wn=(0,R.useState)([]),Xn=(0,s.Z)(Wn,2),Kn=Xn[0],Yn=Xn[1],Gn=(0,R.useState)([]),Qn=(0,s.Z)(Gn,2),Jn=Qn[0],er=Qn[1],tr=(0,R.useState)({panelReqDet:!0,panelCompDet:!0,panelAddr:!0,panelTax:!0,panelBank:!0,panelFile:!0,panelVendetail:!0,panelApproval:!0}),nr=(0,s.Z)(tr,2),rr=nr[0],ar=nr[1];(0,R.useMemo)((function(){return{cities:en,countries:Et,currencies:It}}),[en,Et,It]),(0,R.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,n,r,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return At.current=null===(t=ae.data)||void 0===t?void 0:t.country,e.prev=1,e.next=4,O.post("/master/city",{countryId:ce});case 4:n=e.sent,r=n.data.data,a=r.data.map((function(e){return{value:e.city,label:e.city}})),tn(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),alert(e.t0.stack);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[ce,ae]),(0,R.useEffect)((function(){ln(!0);var e=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zn(!0),e.prev=1,e.next=4,O.post("/master/country");case 4:t=e.sent,n=t.data.data,Et.current=n.data.map((function(e){return{value:e.country_code,label:e.country_name}})),Zn(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),Zn(!1),alert(e.t0.stack);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,n,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jn(!0),e.prev=1,jn(!1),e.next=5,O.get("/master/curr");case 5:t=e.sent,n=t.data,r=n.data,It.current=r.data.map((function(e){return{value:null===e.code?"":e.code,label:null===e.code?"":e.code}})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),jn(!1),alert(e.t0.stack);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,n,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return An(!0),e.prev=1,An(!1),e.next=5,O.get("/master/banksap");case 5:t=e.sent,n=t.data,r=n.data,Pt.current=r,e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),An(!1),console.log(e.t0),alert(e.t0.stack);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return In(!0),e.prev=1,e.next=4,O.get("/vendor/bank/".concat(ae.ven_id));case 4:t=e.sent,n=t.data.data,Vt(n.data),In(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),In(!1),console.log(e.t0),alert(e.t0.stack);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return On(!0),e.prev=1,e.next=4,O.get("/vendor/file/".concat(ae.ven_id));case 4:t=e.sent,n=t.data.data,$t(n.data),On(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),On(!1),alert(e.t0.stack);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,n,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qn(!0),e.prev=1,e.next=4,O.get("/master/company");case 4:t=e.sent,n=t.data,r=n.data,Nt.current=r.data.map((function(e){return{value:e.comp_id,label:e.code+" - "+e.name}})),qn(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),qn(!1),alert(e.t0.stack);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var t,n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bn(!0),e.prev=1,e.next=4,O.get("/master/payterm");case 4:t=e.sent,n=t.data.data,Tt.current=n.map((function(e){return{value:e.term_code,label:"".concat(e.term_code,"-").concat(e.term_name)}})),Bn(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),Bn(!1),alert(e.t0.stack);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();""!==ae.ven_id&&(e(),t(),n(),r(),a(),i(),s(),ln(!1))}),[ae]);var ir=function(e){return function(){"panelReqDet"===e?ar((0,i.Z)((0,i.Z)({},rr),{},{panelReqDet:!rr.panelReqDet})):"panelCompDet"===e&&ar((0,i.Z)((0,i.Z)({},rr),{},{panelCompDet:!rr.panelCompDet})),Ge||("panelAddr"===e?ar((0,i.Z)((0,i.Z)({},rr),{},{panelAddr:!rr.panelAddr})):"panelTax"===e?ar((0,i.Z)((0,i.Z)({},rr),{},{panelTax:!rr.panelTax})):"panelBank"===e?ar((0,i.Z)((0,i.Z)({},rr),{},{panelBank:!rr.panelBank})):"panelFile"===e?ar((0,i.Z)((0,i.Z)({},rr),{},{panelFile:!rr.panelFile})):"panelVendetail"===e?ar((0,i.Z)((0,i.Z)({},rr),{},{panelVendetail:!rr.panelVendetail})):"panelApproval"===e&&ar((0,i.Z)((0,i.Z)({},rr),{},{panelApproval:!rr.panelApproval})))}},lr=function(e,t){"clickaway"!==t&&zn((0,i.Z)((0,i.Z)({},Hn),{},{stat:!1}))},or=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var n,r,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new AbortController,ln(!0),e.prev=2,n={ticket_id:ae.ticket_id,remarks:t.remarks},e.next=6,O.patch("/ticket/reject",n);case 6:r=e.sent,a=r.data,zn({stat:!0,type:"success",message:a.message}),ln(!1),setTimeout((function(){yt("../../dashboard/ticket")}),2e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),ln(!1),alert(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),sr=function(){if(zt||Yt){var e=[].concat((0,a.Z)(Jn),(0,a.Z)(Bt)),t={};qt.map((function(e){t[e.id]=e})),Kn.length>0&&Kn.map((function(e){t[e.bankv_id]=(0,i.Z)((0,i.Z)({},e),{},{id:e.bankv_id})}));var n,l=[],o=[],s=(0,r.Z)(e);try{for(s.s();!(n=s.n()).done;){var c=n.value;"delete"===(null===c||void 0===c?void 0:c.method)&&o.push(c.file_id)}}catch(h){s.e(h)}finally{s.f()}Object.values(t).map((function(e){"delete"===(null===e||void 0===e?void 0:e.method)&&l.push(e.id)}));var u=e.filter((function(e){return!o.includes(e.file_id)})),d=Object.values(t).filter((function(e){return!l.includes(e.id)}));console.log(u,d);var p={A001:0,A002:0,A003:0,A004:0,A005:0,A006:0};"COMPANY"===$e?p={A001:0,A002:0,A004:0,A005:0,A006:0}:"PERSONAL"===$e&&(p={A001:0,A002:0,A003:0,A004:0}),"OVS"===Ve&&(delete p.A005,delete p.A006),Se||delete p.A006;var f={A001:"Account Statement Letter",A002:"Passbook",A003:"ID Card (KTP)",A004:"Integrity Pact",A005:"NPWP (Tax ID Number)",A006:"SPPKP"},m=[];0===d.length?(zn({stat:!0,type:"error",message:"Banks not filled yet | Bank belum dilengkapi"}),Ot.current=!1):Ot.current=!0;var v=!1;d.forEach((function(e){delete e.acc_name,delete e.source,delete e.swift_code,"FINA"!==_t&&delete e.bank_key,Object.keys(e).map((function(t){""===e[t]||null===e[t]||void 0===e[t]?(zn("bank_key"===t?{stat:!0,type:"error",message:"Please complete bank key data on master bank menu"}:{stat:!0,type:"error",message:"".concat(t," field not filled yet")}),Ot.current=!1,v=!0):v||(Ot.current=!0)}))})),0===u.length?(zn({stat:!0,type:"error",message:"Attachment not filled yet | Lampiran belum dilengkapi"}),St.current=!1):St.current=!0,u.forEach((function(e){p[e.file_type]=p[e.file_type]+1})),Object.keys(p).map((function(e){0===p[e]&&m.push(f[e])})),m.length>0?(St.current=!1,zn({stat:!0,type:"error",message:"Surat berikut belum lengkap : ".concat(m.join(", "))})):St.current=!0}else Wt(!0),Gt(!0);lt(!1)};(0,R.useEffect)((function(){sr()}),[$]);var cr=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(t){var n,r,a,o,s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lt(!0),!0!==mn){e.next=5;break}return e.next=4,or(t);case 4:return e.abrupt("return");case 5:if(r={ven_id:ae.ven_id,ticket_num:ae.ticket_num,title:t.titlecomp,name_1:t.name1,local_ovs:t.localovs,postal:t.postal,country:t.country,city:t.city,street:t.street,street2:t.street2,telf1:t.telf,fax:t.fax,email:t.email,is_pkp:t.ispkp,is_tender:t.is_tender,npwp:t.npwp.trim(),pay_mthd:t.paymthd,pay_term:t.payterm,company:t.company,purch_org:t.purchorg,ven_acc:t.venacc,ven_group:t.vengroup,ven_type:t.ventype,description:t.description,limit_vendor:null===(n=t.limit.toString().match(/\d+/g))||void 0===n?void 0:n.join(""),lim_curr:t.currency,ven_code:t.vendorcode,search_term:t.search_term},a={role:void 0===jt.role?"VENDOR":jt.role,is_draft:dn.current,ticket_id:ae.ticket_id,remarks:t.remarks,ticket_state:_t,ven_detail:r,ven_banks:Kn,ven_files:Jn},""!==ae.data.reject_by&&(a.remarks=""),wt.FINA&&(a.mdm_id=jt.user_id),sr(),e.prev=10,dn.current){e.next=14;break}if(Ot.current&&St.current){e.next=14;break}return e.abrupt("return");case 14:if(ln(!0),void 0!==jt.role&&"form"===N.type){e.next=21;break}return e.next=18,ke.Z.post("".concat("/api","/ticket/newform/submit"),a);case 18:o=e.sent,e.next=24;break;case 21:return e.next=23,O.post("/ticket/form/submit",a);case 23:o=e.sent;case 24:Yn((function(e){return e.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{method:"update"})}))})),s=o.data,zn({stat:!0,type:"success",message:s.message}),ln(!1),lt(!1),dn.current||setTimeout((function(){yt(wt.INIT?0:"../../dashboard/ticket")}),3e3),e.next=38;break;case 32:e.prev=32,e.t0=e.catch(10),lt(!1),console.log(e.t0.stack),zn({stat:!0,type:"error",message:"error submitting"}),ln(!1);case 38:case"end":return e.stop()}}),e,null,[[10,32]])})));return function(t){return e.apply(this,arguments)}}();return(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsxs)(c.Z,{maxWidth:"xl",children:[(0,ee.jsx)(u.Z,{sx:{height:120,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,ee.jsx)(d.Z,{variant:"h4",gutterBottom:!0,children:"Form Vendor Registration ".concat(ae.ticket_num)})}),(0,ee.jsxs)(c.Z,{children:[(0,ee.jsxs)("form",{onSubmit:D(cr),children:[(0,ee.jsx)(p.Z,{severity:"warning",variant:"filled",sx:{width:"45rem",mt:"1rem",mb:"1rem"},children:(0,ee.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"column"},children:["Please download file Pakta Integritas below before submitting",(0,ee.jsx)(f.Z,{href:"".concat("/api","/master/file/Kode_Etik_Supplier_Vendor_dan_Kontraktor.doc"),children:"Link Download File Pakta Integritas"})]})}),(0,ee.jsxs)(m.Z,{expanded:rr.panelReqDet,onChange:ir("panelReqDet"),children:[(0,ee.jsx)(v.Z,{sx:{pointerEvents:"none"},expandIcon:(0,ee.jsx)(A.Z,{sx:{pointerEvents:"auto"}}),id:"panelReqDet",children:(0,ee.jsx)(d.Z,{children:"Requestor"})}),(0,ee.jsx)(h.Z,{children:(0,ee.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,ee.jsx)(x.ZP,{item:!0,xs:!0,children:(0,ee.jsx)(W.$,{name:"emailRequestor",label:"Email Requestor",control:F,readOnly:!0})}),(0,ee.jsx)(x.ZP,{item:!0,xs:!0,children:(0,ee.jsx)(W.$,{name:"deptRequestor",label:"Departement",control:F,readOnly:!0})})]})})]}),(0,ee.jsxs)(m.Z,{expanded:rr.panelCompDet,onChange:ir("panelCompDet"),children:[(0,ee.jsx)(v.Z,{sx:{pointerEvents:"none"},expandIcon:(0,ee.jsx)(A.Z,{sx:{pointerEvents:"auto"}}),id:"panelCompDet",children:(0,ee.jsx)(d.Z,{children:"Company Details"})}),(0,ee.jsx)(h.Z,{children:(0,ee.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(je.Z,{name:"titlecomp",label:"Title",control:F,readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type),onChangeovr:function(e){Ue(e)},options:[{value:"COMPANY",label:"COMPANY"},{value:"PERSONAL",label:"PERSONAL"}],rules:{required:"Please insert this field"}})}),(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(je.Z,{name:"localovs",label:"Local / Overseas",control:F,readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type),options:[{value:"LOCAL",label:"Local"},{value:"OVS",label:"Overseas"}],rules:{required:"Please insert this field"},onChangeovr:function(e){Le(e)}})}),(0,ee.jsx)(x.ZP,{item:!0,xs:4,children:(0,ee.jsx)(W.$,{name:"name1",label:"Company Name",control:F,readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type),rules:{required:"Please insert this field",maxLength:{value:300,message:"Max 300 Character"}},onChangeovr:function(e){e!=We&&""!==e?(Qe(!0),ar({panelReqDet:!0,panelCompDet:!0,panelAddr:!1,panelTax:!1,panelBank:!1,panelFile:!1,panelVendetail:!1,panelApproval:!1}),lt(!0)):""!=We&&(Qe(!1),ar({panelReqDet:!0,panelCompDet:!0,panelAddr:!0,panelTax:!0,panelBank:!0,panelFile:!0,panelVendetail:!0,panelApproval:!0}),lt(!1))},toUpperCase:!0})}),Ge&&(0,ee.jsx)(x.ZP,{item:!0,xs:2,children:(0,ee.jsx)(J.Z,{onClick:function(){return bt(q("name1"))},sx:{width:"4rem",height:"3.5rem"},loading:cn,children:"Verify"})}),("CREA"===_t||"FINA"===_t)&&wt[_t]&&(0,ee.jsx)(x.ZP,{item:!0,xs:6,children:(0,ee.jsx)(W.$,{name:"search_term",label:"Search Term",control:F,readOnly:!(wt.CREA&&"CREA"===_t),rules:{required:"Please insert this field",maxLength:{value:100,message:"Max 100 Character"}},toUpperCase:!0})})]})})]}),Ge&&(0,ee.jsx)(p.Z,{sx:{mt:"2rem",mb:"2rem"},severity:"error",variant:"filled",children:"Company Name Already Exist or Not Valid"}),(0,ee.jsxs)(m.Z,{expanded:rr.panelAddr,onChange:ir("panelAddr"),children:[(0,ee.jsx)(v.Z,{sx:{pointerEvents:"none"},expandIcon:(0,ee.jsx)(A.Z,{sx:{pointerEvents:"auto"}}),id:"panelAddr",children:(0,ee.jsx)(d.Z,{children:"Address"})}),(0,ee.jsx)(h.Z,{children:(0,ee.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,ee.jsx)(x.ZP,{item:!0,xs:9,children:(0,ee.jsx)(W.$,{name:"street",label:"Address",control:F,readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type),rules:{required:"Please insert this field",maxLength:{value:200,message:"Max 200 Character"},pattern:{value:/^[^,]*$/,message:"Please fill without ',' (comma) character "}},toUpperCase:!0,helperText:"Please insert address without ',' (comma) character"})}),("CREA"===_t||"FINA"===_t)&&(0,ee.jsx)(x.ZP,{item:!0,xs:9,children:(0,ee.jsx)(W.$,{name:"street2",label:"Address 2",control:F,readOnly:!(wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type||wt.FINA&&"FINA"===_t),rules:{maxLength:{value:160,message:"Max 160 Character"}},toUpperCase:!0})}),(0,ee.jsx)(x.ZP,{item:!0,xs:3}),(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(je.Z,{name:"country",label:"Country",control:F,readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type),options:Et.current,onChangeovr:function(e){ue(e),At.current=e},rules:{required:"Please insert this field"}})}),(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(we.Z,{name:"postal",label:"Postal Code",control:F,readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type),rules:{required:"OVS"!==Ve&&"Please insert this field"},format:"################",isNumString:!1})}),(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(K.Z,{name:"city",label:"City",control:F,readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type),options:en,rules:{required:"Please insert this field"},freeSolo:!0})}),(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(we.Z,{name:"telf",label:"Telephone Number",control:F,readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type),format:"################",isNumString:!1})}),(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(W.$,{name:"fax",label:"Fax",control:F,readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type)})}),(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(W.$,{name:"email",label:"Email",control:F,readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type),rules:{required:"Please insert this field",pattern:{value:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g,message:"invalid email address"}},toLowerCase:!0})})]})})]}),(0,ee.jsxs)(m.Z,{expanded:rr.panelTax,onChange:ir("panelTax"),children:[(0,ee.jsx)(v.Z,{sx:{pointerEvents:"none"},expandIcon:(0,ee.jsx)(A.Z,{sx:{pointerEvents:"auto"}}),children:(0,ee.jsx)(d.Z,{children:"Tax and Payment"})}),(0,ee.jsx)(h.Z,{children:(0,ee.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,ee.jsx)(x.ZP,{item:!0,xs:4,children:(0,ee.jsx)(Ce,{name:"ispkp",label:"Pengusaha Kena Pajak (PKP)",control:F,readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type),onChangeovr:function(e){De(e)}})}),(0,ee.jsx)(x.ZP,{item:!0,xs:9}),(0,ee.jsx)(x.ZP,{item:!0,xs:4,children:(0,ee.jsx)(W.$,{name:"npwp",label:"Tax Number",control:F,readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type),rules:{pattern:{value:/^[0-9.-]+$/,message:"format not matched. only numbers (0-9), point (.), and hyphen (-)"},required:!!Se&&"this field is required"}})}),(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(je.Z,{name:"paymthd",label:"Payment Method",control:F,options:[{value:"bank",label:"Bank"},{value:"cash",label:"Cash"},{value:"Giro",label:"Giro"}],readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type),rules:{required:"Please insert this field"}})}),(0,ee.jsx)(x.ZP,{item:!0,xs:4,children:(0,ee.jsx)(je.Z,{name:"payterm",label:"Payment Term",control:F,options:Tt.current,readOnly:!(wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t),rules:{required:"Please insert this field"}})})]})})]}),("CREA"===_t||"FINA"===_t||"END"===_t)&&(0,ee.jsxs)(m.Z,{expanded:rr.panelVendetail,onChange:ir("panelVendetail"),children:[(0,ee.jsx)(v.Z,{sx:{pointerEvents:"none"},expandIcon:(0,ee.jsx)(A.Z,{sx:{pointerEvents:"auto"}}),children:(0,ee.jsx)(d.Z,{children:"Vendor Details"})}),(0,ee.jsx)(h.Z,{children:(0,ee.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,ee.jsx)(x.ZP,{item:!0,xs:5,children:(0,ee.jsx)(je.Z,{name:"company",label:"Company",control:F,options:Nt.current,readOnly:!("CREA"===_t&&wt.CREA),rules:{required:"Please insert this field"}})}),(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(W.$,{name:"purchorg",label:"Purchasing Organization",control:F,readOnly:!("CREA"===_t&&wt.CREA),rules:{required:"Please insert this field",maxLength:{value:20,message:"Max 20 Character"}},toUpperCase:!0})}),(0,ee.jsx)(x.ZP,{item:!0,xs:3}),(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(je.Z,{name:"vengroup",label:"Vendor Group",control:F,options:[{value:"3RD_PARTY",label:"3RD Party"},{value:"BANK",label:"Bank"},{value:"SHAREHOLDERS",label:"Shareholders"},{value:"EMPLOYEE",label:"Employee"},{value:"INTERDIVISION",label:"Interdivision"},{value:"RELATED",label:"Related"},{value:"INTERCO",label:"Interco"}],onChangeovr:function(e){me(e)},readOnly:!("CREA"===_t&&wt.CREA),rules:{required:"Please insert this field"}})}),(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(je.Z,{name:"venacc",label:"Vendor Account",control:F,options:[{value:"TRADE",label:"Trade"},{value:"NON_TRADE",label:"Non Trade"}],onChangeovr:function(e){Ze(e),"TRADE"!==e&&(H("currency"),H("limit"))},readOnly:!("CREA"===_t&&wt.CREA),rules:{required:"Please insert this field"}})}),(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(je.Z,{name:"ventype",label:"Vendor Type",control:F,options:"NON_TRADE"!==xe?[{value:"X",label:"X"}]:Ie[fe]?Ie[fe]:[{value:"X",label:"X"}],readOnly:!("CREA"===_t&&wt.CREA),rules:{required:"Please insert this field"}})}),(0,ee.jsx)(x.ZP,{item:!0,xs:3}),(0,ee.jsx)(x.ZP,{item:!0,xs:3,children:(0,ee.jsx)(je.Z,{name:"currency",label:"Limit Currency",control:F,options:It.current,onChangeovr:function(e){Te(e)},disabled:"NON_TRADE"===xe,readOnly:!("CREA"===_t&&wt.CREA),rules:{required:"TRADE"===xe&&"Please insert this field"}})}),(0,ee.jsx)(x.ZP,{item:!0,xs:4,children:(0,ee.jsx)(Re,{name:"limit",label:"Limit",control:F,format:["thousandSeparator"],currency:Ae,disabled:"NON_TRADE"===xe,readOnly:!("CREA"===_t&&wt.CREA),rules:{required:"TRADE"===xe&&"Please insert this field"}})}),(0,ee.jsx)(x.ZP,{item:!0,xs:4}),(0,ee.jsx)(x.ZP,{item:!0,xs:12,children:(0,ee.jsx)(W.$,{name:"description",label:"Description",control:F,readOnly:!("CREA"===_t&&wt.CREA),rules:{required:!!tt&&"Please insert this field"}})}),(0,ee.jsx)(x.ZP,{item:!0,xs:5,children:(0,ee.jsx)(Ce,{name:"is_tender",label:"Tender Participation Above One Billion",control:F,readOnly:!("CREA"===_t&&wt.CREA),onChangeovr:function(e){nt(e),e||H("description")}})})]})})]})]},1),(0,ee.jsx)("form",{onSubmit:G(or),children:(0,ee.jsxs)(Z.Z,{open:ct,onClose:function(){ut(!1)},maxWidth:"lg",sx:{zIndex:function(e){return e.zIndex.drawer-2}},children:[(0,ee.jsx)(b.Z,{children:"Reject Form"}),(0,ee.jsxs)(u.Z,{sx:{width:"40rem",height:"12rem",display:"flex",flexDirection:"column",gap:5,p:2,mb:3},children:[(0,ee.jsxs)(p.Z,{severity:"warning",children:[(0,ee.jsx)(y.Z,{children:"Please provide rejection reasons"})," Your current works will not be saved when rejecting form"]}),(0,ee.jsx)(W.$,{name:"remarks",label:"remarks",control:te,rules:{required:"Please provide rejection reason"}})]}),(0,ee.jsxs)(k.Z,{children:[(0,ee.jsx)(j.Z,{type:"submit",color:"error",variant:"contained",onClick:G(or),children:"Reject"}),(0,ee.jsx)(j.Z,{onClick:function(){ut(!1)},variant:"contained",children:"Cancel"})]})]})}),(0,ee.jsxs)(m.Z,{expanded:rr.panelBank,onChange:ir("panelBank"),children:[(0,ee.jsx)(v.Z,{sx:{pointerEvents:"none"},expandIcon:(0,ee.jsx)(A.Z,{sx:{pointerEvents:"auto"}}),children:(0,ee.jsx)(d.Z,{children:"Bank Information"})}),(0,ee.jsx)(h.Z,{children:(0,ee.jsx)(ie,{onChildDataChange:function(e){Yn(e)},initData:qt,idParent:ae.ven_id,banks:Pt.current,currencies:It.current,countries:Et.current,isallow:(wt.INIT||wt.CREA)&&("INIT"===_t||"PROC"===ae.ticket_type),ticketState:_t,isLoad:En})})]}),(0,ee.jsxs)(m.Z,{expanded:rr.panelFile,onChange:ir("panelFile"),children:[(0,ee.jsx)(v.Z,{sx:{pointerEvents:"none"},expandIcon:(0,ee.jsx)(A.Z,{sx:{pointerEvents:"auto"}}),children:(0,ee.jsx)(d.Z,{children:"File Upload"})}),(0,ee.jsx)(h.Z,{children:(0,ee.jsx)(be,{inputTypes:Pe,iniData:Bt,idParent:ae.ven_id,onChildDataChange:function(e){er(e)},loadData:Nn,allow:wt.INIT&&"INIT"===_t||wt.CREA&&"CREA"===_t&&"PROC"===ae.ticket_type})})]}),("FINA"===_t||"END"===_t)&&(0,ee.jsxs)(m.Z,{expanded:rr.panelApproval,onChange:ir("panelApproval"),children:[(0,ee.jsx)(v.Z,{sx:{pointerEvents:"none"},expandIcon:(0,ee.jsx)(A.Z,{sx:{pointerEvents:"auto"}}),children:(0,ee.jsx)(d.Z,{children:"Approval"})}),(0,ee.jsx)(h.Z,{children:(0,ee.jsx)(x.ZP,{container:!0,spacing:2,children:(0,ee.jsx)(x.ZP,{item:!0,xs:6,children:(0,ee.jsx)(W.$,{name:"vendorcode",label:"Vendor Code",control:F,readOnly:!("FINA"===_t&&wt.FINA),rules:{required:"Please insert this field",maxLength:{value:10,message:"Max character is 10"},minLength:{value:10,message:"Min character is 10"}}})})})})]}),(0,ee.jsx)(u.Z,{sx:{my:5,backgroundColor:"white"},children:(0,ee.jsx)(W.$,{name:"remarks_readOnly",label:"Rejection Remarks",control:F,readOnly:!0})}),(0,ee.jsxs)(u.Z,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[(0,ee.jsx)(u.Z,{children:void 0===ae.permission&&(0,ee.jsx)(j.Z,{sx:{height:50,width:100,margin:2},color:"error",variant:"text",onClick:function(){yt("../ticket")},children:"Back"})}),(0,ee.jsxs)(u.Z,{children:[("CREA"===_t&&wt.CREA&&"PROC"!==ae.ticket_type||"FINA"===_t&&wt.FINA&&"MGR"!==ae.cur_pos)&&(0,ee.jsx)(j.Z,{sx:{height:50,width:100,margin:2},color:"error",variant:"contained",onClick:function(){ut(!0)},children:"Reject"}),wt[_t]&&"MGR"!==ae.cur_pos&&(0,ee.jsx)(j.Z,{sx:{height:50,width:120,margin:2},color:"warning",variant:"contained",type:"submit",onClick:function(){dn.current=!0,cr(q())},disabled:it,children:"Save Draft"}),wt[_t]&&"MGR"!==ae.cur_pos&&(0,ee.jsx)(j.Z,{sx:{height:50,width:100,margin:2},variant:"contained",type:"submit",onClick:D((function(e){dn.current=!1,tt&&"CREA"===_t&&U&&Ot.current&&St.current?mt(!0):cr(e)})),disabled:it,children:"Submit"})]})]})]}),(0,ee.jsx)(g.Z,{open:Hn.stat,onClose:lr,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,ee.jsx)(p.Z,{severity:Hn.type,onClose:lr,variant:"filled",children:Hn.message})}),(0,ee.jsx)(g.Z,{open:"INIT"!==ae.ticketState&&wt.INIT,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,ee.jsx)(p.Z,{severity:"success",variant:"filled",children:"Ticket Number ".concat(ae.ticket_num," has already submitted")})}),(0,ee.jsx)(_.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:an||xn&&kn&&Cn&&En&&Nn&&Fn&&Mn,children:(0,ee.jsx)(C.Z,{color:"inherit"})}),(0,ee.jsx)(Z.Z,{open:Hn.stat&&"success"===Hn.type&&0==dn.current,children:(0,ee.jsx)(u.Z,{sx:{width:500,height:200,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"success.main"},children:(0,ee.jsx)(d.Z,{variant:"h4",sx:{m:2,borderRadius:2},align:"justify",children:Hn.message})})}),(0,ee.jsx)(Ee,{open:ft,handleConfirm:function(){Zt(!0)},onCloseConf:function(){mt(!1)},sx:{zIndex:function(e){return e.zIndex.drawer-2}},confirmText:"You're about to send this form to CEO/CFO, are you sure ?"})]})})}}}]);
//# sourceMappingURL=881.55076478.chunk.js.map